import{_,r as g,c as d,o as m,a as e,l as k,b as a,d as h,i as x,v as b,k as C,F as f,f as y,n as c,t as l,h as L}from"./index-Dyw8ENAg.js";const S={name:"WebhookLogTable",data(){return{selectedShow:10,selectedStatus:"",searchText:"",currentPage:1,selectedLog:null,logs:[{source:"Stripe",icon:"logos:stripe",iconColor:"",event:"payment_intent.succeeded",timestamp:"2024-12-26 10:30:15",status:"Success",retries:"0/3",message:"Payment processed successfully.",payload:{id:"pi_12345",amount:2e3,currency:"gbp",status:"succeeded"},response:{status:200,message:"OK"}},{source:"Google Gemini",icon:"simple-icons:googlegemini",iconColor:"text-purple",event:"analysis.completed",timestamp:"2024-12-26 10:28:45",status:"Success",retries:"0/3",message:"Analysis for Report #123 completed.",payload:{report_id:"rep_9988",tokens_used:154,model:"gemini-pro-1.5"},response:{status:200,data:{success:!0}}},{source:"Dentally",icon:"mdi:tooth-outline",iconColor:"text-primary-600",event:"patient.updated",timestamp:"2024-12-26 10:15:00",status:"Failed",retries:"3/3",message:"Timeout connecting to internal service.",payload:{patient_id:"pat_5566",changes:{email:"new@example.com"}},response:{status:504,error:"Gateway Timeout"}},{source:"WhatsApp",icon:"logos:whatsapp-icon",iconColor:"",event:"message.status",timestamp:"2024-12-26 09:55:12",status:"Success",retries:"0/3",message:"Message delivered to +1234567890."},{source:"Stripe",icon:"logos:stripe",iconColor:"",event:"invoice.payment_failed",timestamp:"2024-12-26 09:40:30",status:"Retried",retries:"1/3",message:"Card declined. Retrying..."},{source:"SOE",icon:"mdi:server-network",iconColor:"text-info-main",event:"appointment.cancelled",timestamp:"2024-12-26 09:30:00",status:"Success",retries:"0/3",message:"Appointment #998 cancelled."},{source:"Google Gemini",icon:"simple-icons:googlegemini",iconColor:"text-purple",event:"voice.transcription",timestamp:"2024-12-26 09:25:10",status:"Failed",retries:"3/3",message:"Invalid audio format."}]}},computed:{entriesPerPage(){return Number(this.selectedShow)},filteredData(){let n=[...this.logs];if(this.searchText){const t=this.searchText.toLowerCase();n=n.filter(u=>u.event.toLowerCase().includes(t)||u.source.toLowerCase().includes(t))}return this.selectedStatus&&(n=n.filter(t=>t.status===this.selectedStatus)),n},filteredLogs(){return this.filteredData.slice(this.startIndex,this.endIndex)},totalEntries(){return this.filteredData.length},totalPages(){return Math.ceil(this.totalEntries/this.entriesPerPage)},startIndex(){return(this.currentPage-1)*this.entriesPerPage},endIndex(){return Math.min(this.startIndex+this.entriesPerPage,this.totalEntries)}},methods:{statusClasses(n){return{"bg-success-focus text-success-main":n==="Success","bg-danger-focus text-danger-main":n==="Failed","bg-warning-focus text-warning-main":n==="Retried"}},goToPage(n){n>=1&&n<=this.totalPages&&(this.currentPage=n)},openDetails(n){this.selectedLog=n},closeModal(){this.selectedLog=null},deleteLog(n){confirm("Are you sure you want to delete this log?")&&(this.logs=this.logs.filter(t=>t!==n))}}},P={class:"card basic-data-table"},T={class:"card-header border-bottom bg-base py-16 px-24 d-flex align-items-center justify-content-between"},j={class:"d-flex align-items-center gap-2"},M={class:"btn btn-outline-danger-600 border-danger-600 text-danger-600 hover-bg-danger-600 hover-text-white radius-8 px-20 py-11 d-flex align-items-center gap-2"},D={class:"btn btn-primary-600 radius-8 px-20 py-11 d-flex align-items-center gap-2"},E={class:"card-body p-24"},R={class:"d-flex flex-wrap align-items-center justify-content-between gap-3 mb-24"},W={class:"d-flex align-items-center gap-3"},I={class:"d-flex align-items-center gap-2"},V={class:"d-flex flex-wrap align-items-center gap-3"},A={class:"position-relative"},B={class:"table-responsive scroll-sm"},F={class:"table bordered-table mb-0"},N={class:"d-flex align-items-center gap-2"},G={class:"w-32-px h-32-px bg-white border border-neutral-200 rounded-circle d-flex justify-content-center align-items-center"},O={class:"text-md mb-0 fw-medium"},U={class:"text-primary-600 fw-medium"},J={class:"text-secondary-light"},q={class:"d-inline-block text-truncate",style:{"max-width":"200px"}},z={class:"d-flex align-items-center gap-2"},K=["onClick"],H=["onClick"],Q={class:"d-flex flex-wrap align-items-center justify-content-between gap-2 mt-24"},X={class:"text-secondary-light text-sm"},Y={class:"pagination d-flex flex-wrap align-items-center gap-2 justify-content-center"},Z={class:"page-item"},$=["onClick"],ee={class:"page-item"},te={key:0,class:"modal fade show d-block",tabindex:"-1",role:"dialog",style:{background:"rgba(0,0,0,0.5)"}},se={class:"modal-dialog modal-lg modal-dialog-centered",role:"document"},oe={class:"modal-content radius-16"},ne={class:"modal-header py-16 px-24 border-bottom"},ie={class:"modal-body p-24"},le={class:"d-flex align-items-center justify-content-between mb-24"},ae={class:"text-lg mb-0 text-primary-600 fw-bold"},re={class:"row g-3"},ce={class:"col-md-6"},de={class:"d-flex align-items-center gap-2"},me={class:"text-neutral-900"},ue={class:"col-md-6"},pe={class:"text-neutral-900"},ge={class:"mb-24"},xe={class:"bg-neutral-50 radius-8 p-16 border border-neutral-200"},he={class:"mb-0 text-sm text-secondary-light overflow-auto",style:{"max-height":"200px"}},be={class:"bg-neutral-50 radius-8 p-16 border border-neutral-200"},fe={class:"mb-0 text-sm text-secondary-light overflow-auto",style:{"max-height":"200px"}},ye={class:"modal-footer border-top py-16 px-24"};function _e(n,t,u,v,o,i){const r=g("iconify-icon");return m(),d("div",P,[e("div",T,[t[9]||(t[9]=e("h6",{class:"text-lg fw-semibold mb-0"},"System Webhook Logs",-1)),e("div",j,[e("button",M,[a(r,{icon:"solar:trash-bin-trash-linear",class:"text-xl"}),t[7]||(t[7]=h(" Clear Logs ",-1))]),e("button",D,[a(r,{icon:"solar:refresh-linear",class:"text-xl"}),t[8]||(t[8]=h(" Refresh ",-1))])])]),e("div",E,[e("div",R,[e("div",W,[e("div",I,[t[11]||(t[11]=e("span",{class:"text-secondary-light fw-medium"},"Show",-1)),x(e("select",{class:"form-select form-select-sm w-auto ps-12 py-6 radius-12 h-40-px","onUpdate:modelValue":t[0]||(t[0]=s=>o.selectedShow=s)},[...t[10]||(t[10]=[e("option",{value:"10"},"10",-1),e("option",{value:"20"},"20",-1),e("option",{value:"50"},"50",-1)])],512),[[b,o.selectedShow]])])]),e("div",V,[x(e("select",{class:"form-select form-select-sm w-auto ps-12 py-6 radius-12 h-40-px","onUpdate:modelValue":t[1]||(t[1]=s=>o.selectedStatus=s)},[...t[12]||(t[12]=[e("option",{value:""},"All Status",-1),e("option",{value:"Success"},"Success",-1),e("option",{value:"Failed"},"Failed",-1),e("option",{value:"Retried"},"Retried",-1)])],512),[[b,o.selectedStatus]]),e("div",A,[x(e("input",{type:"text",class:"form-control form-control-sm w-auto ps-12 py-6 radius-12 h-40-px",placeholder:"Search event...","onUpdate:modelValue":t[2]||(t[2]=s=>o.searchText=s)},null,512),[[C,o.searchText]]),a(r,{icon:"ion:search-outline",class:"position-absolute top-50 end-0 translate-middle-y me-12 text-secondary-light"})])])]),e("div",B,[e("table",F,[t[13]||(t[13]=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Source"),e("th",{scope:"col"},"Event"),e("th",{scope:"col"},"Timestamp"),e("th",{scope:"col"},"Status"),e("th",{scope:"col"},"Retries"),e("th",{scope:"col"},"Message / Error"),e("th",{scope:"col"},"Action")])],-1)),e("tbody",null,[(m(!0),d(f,null,y(i.filteredLogs,(s,p)=>(m(),d("tr",{key:p},[e("td",null,[e("div",N,[e("span",G,[a(r,{icon:s.icon,class:c(s.iconColor)},null,8,["icon","class"])]),e("span",O,l(s.source),1)])]),e("td",null,[e("span",U,l(s.event),1)]),e("td",null,l(s.timestamp),1),e("td",null,[e("span",{class:c([i.statusClasses(s.status),"px-24 py-4 rounded-pill fw-medium text-sm"])},l(s.status),3)]),e("td",null,l(s.retries),1),e("td",J,[e("span",q,l(s.message),1)]),e("td",null,[e("div",z,[e("button",{type:"button",onClick:w=>i.openDetails(s),class:"w-32-px h-32-px bg-primary-light text-primary-600 rounded-circle d-inline-flex align-items-center justify-content-center",title:"View Details"},[a(r,{icon:"solar:eye-linear"})],8,K),e("button",{type:"button",onClick:w=>i.deleteLog(s),class:"w-32-px h-32-px bg-danger-focus text-danger-main rounded-circle d-inline-flex align-items-center justify-content-center",title:"Delete Log"},[a(r,{icon:"solar:trash-bin-trash-linear"})],8,H)])])]))),128))])])]),e("div",Q,[e("span",X," Showing "+l(i.startIndex+1)+" to "+l(i.endIndex)+" of "+l(i.totalEntries)+" entries ",1),e("ul",Y,[e("li",Z,[e("a",{class:c(["page-link text-secondary-light fw-medium radius-4 border-0 px-10 py-10 d-flex align-items-center justify-content-center h-32-px w-32-px bg-base",{disabled:o.currentPage===1}]),href:"javascript:void(0)",onClick:t[3]||(t[3]=s=>i.goToPage(o.currentPage-1))},[a(r,{icon:"ep:d-arrow-left",class:"text-xl"})],2)]),(m(!0),d(f,null,y(i.totalPages,s=>(m(),d("li",{key:s,class:"page-item"},[e("a",{href:"javascript:void(0)",class:c(["page-link fw-medium radius-4 border-0 px-10 py-10 d-flex align-items-center justify-content-center h-32-px w-32-px",{"bg-primary-600 text-white":o.currentPage===s,"bg-primary-50 text-secondary-light":o.currentPage!==s}]),onClick:p=>i.goToPage(s)},l(s),11,$)]))),128)),e("li",ee,[e("a",{class:c(["page-link text-secondary-light fw-medium radius-4 border-0 px-10 py-10 d-flex align-items-center justify-content-center h-32-px w-32-px bg-base",{disabled:o.currentPage===i.totalPages}]),href:"javascript:void(0)",onClick:t[4]||(t[4]=s=>i.goToPage(o.currentPage+1))},[a(r,{icon:"ep:d-arrow-right",class:"text-xl"})],2)])])])]),o.selectedLog?(m(),d("div",te,[e("div",se,[e("div",oe,[e("div",ne,[t[14]||(t[14]=e("h5",{class:"modal-title fw-bold"},"Webhook Details",-1)),e("button",{type:"button",class:"btn-close",onClick:t[5]||(t[5]=(...s)=>i.closeModal&&i.closeModal(...s))})]),e("div",ie,[e("div",le,[e("div",null,[t[15]||(t[15]=e("span",{class:"d-block text-sm text-secondary-light mb-1"},"Event",-1)),e("h6",ae,l(o.selectedLog.event),1)]),e("span",{class:c([i.statusClasses(o.selectedLog.status),"px-16 py-8 rounded-pill fw-medium text-sm"])},l(o.selectedLog.status),3)]),e("div",re,[e("div",ce,[t[16]||(t[16]=e("span",{class:"text-sm text-secondary-light fw-medium d-block mb-1"},"Source",-1)),e("div",de,[a(r,{icon:o.selectedLog.icon,class:c([o.selectedLog.iconColor,"text-xl"])},null,8,["icon","class"]),e("span",me,l(o.selectedLog.source),1)])]),e("div",ue,[t[17]||(t[17]=e("span",{class:"text-sm text-secondary-light fw-medium d-block mb-1"},"Timestamp",-1)),e("span",pe,l(o.selectedLog.timestamp),1)])]),t[20]||(t[20]=e("hr",{class:"my-24 border-neutral-200"},null,-1)),e("div",ge,[t[18]||(t[18]=e("h6",{class:"text-md fw-bold mb-12"},"Payload / Request Body",-1)),e("div",xe,[e("pre",he,l(JSON.stringify(o.selectedLog.payload,null,2)),1)])]),e("div",null,[t[19]||(t[19]=e("h6",{class:"text-md fw-bold mb-12"},"Response / Error",-1)),e("div",be,[e("pre",fe,l(JSON.stringify(o.selectedLog.response,null,2)),1)])])]),e("div",ye,[e("button",{type:"button",class:"btn btn-secondary radius-8",onClick:t[6]||(t[6]=(...s)=>i.closeModal&&i.closeModal(...s))},"Close")])])])])):k("",!0)])}const ve=_(S,[["render",_e]]),we={name:"WebhookLogs",components:{Breadcrumb:L,WebhookLogTable:ve}},ke={class:"dashboard-main-body"},Ce={class:"alert alert-danger-100 text-danger-600 fw-medium border-0 d-flex align-items-center gap-2 mb-24 radius-12"};function Le(n,t,u,v,o,i){const r=g("Breadcrumb"),s=g("iconify-icon"),p=g("WebhookLogTable");return m(),d("div",ke,[a(r,{title:"Webhook Logs",breadcrumbs:[{name:"Application",path:"/admin/webhook-logs"},{name:"Webhook Logs"}]}),e("div",Ce,[a(s,{icon:"solar:danger-triangle-bold",class:"text-xl"}),t[0]||(t[0]=h(" Monitor incoming webhooks for system debugging and reliability. Check failed logs for immediate action. ",-1))]),a(p)])}const Pe=_(we,[["render",Le]]);export{Pe as default};
