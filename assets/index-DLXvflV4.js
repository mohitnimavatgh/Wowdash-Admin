import{_ as v,G as x,H as S,r as g,c as d,o as c,a as e,l as k,b as r,d as y,i as h,v as f,k as L,F as b,f as _,A as C,t as l,n as m,h as P}from"./index-Dyw8ENAg.js";const T={name:"ActivityLogTable",data(){return{selectedShow:10,selectedType:"",searchText:"",currentPage:1,selectedLog:null,logs:[{actor:"Kathryn Murphy",role:"Super Admin",avatar:x,action:"Updated Clinic Status",resource:"Clinic: Smile Dental",type:"Clinic",ip:"192.168.1.10",timestamp:"2024-12-26 14:15:00",status:"Success",details:{previous_status:"Trial",new_status:"Active",reason:"Payment received"}},{actor:"Kathryn Murphy",role:"Super Admin",avatar:x,action:"Added New Admin",resource:"User: Annette Black",type:"Admin",ip:"192.168.1.10",timestamp:"2024-12-26 13:45:22",status:"Success",details:{name:"Annette Black",role:"Support Agent",email:"annette@dentaify.com"}},{actor:"System",role:"Automated",avatar:null,action:"Generated Monthly Invoice",resource:"Invoice: INV-2024-001",type:"System",ip:"10.0.0.5",timestamp:"2024-12-26 12:00:00",status:"Success",details:{amount:499,clinic:"City Smiles",due_date:"2025-01-26"}},{actor:"Annette Black",role:"Support Agent",avatar:S,action:"Failed Login Attempt",resource:"Auth Service",type:"Security",ip:"203.0.113.45",timestamp:"2024-12-26 11:30:10",status:"Failed",details:{reason:"Invalid password",user_agent:"Mozilla/5.0..."}},{actor:"Kathryn Murphy",role:"Super Admin",avatar:x,action:"Modified AI Settings",resource:"Global Settings",type:"Admin",ip:"192.168.1.10",timestamp:"2024-12-26 10:15:00",status:"Success",details:{module:"AI Voice",setting:"enabled",value:!1}},{actor:"System",role:"Automated",avatar:null,action:"Backup Completed",resource:"Database",type:"System",ip:"10.0.0.2",timestamp:"2024-12-26 04:00:00",status:"Success",details:{size:"2.5GB",duration:"10m 5s"}}]}},computed:{entriesPerPage(){return Number(this.selectedShow)},filteredData(){let i=[...this.logs];if(this.searchText){const t=this.searchText.toLowerCase();i=i.filter(u=>u.action.toLowerCase().includes(t)||u.actor.toLowerCase().includes(t)||u.resource.toLowerCase().includes(t))}return this.selectedType&&(this.selectedType==="Admin"&&(i=i.filter(t=>t.role.includes("Admin")||t.type==="Admin")),this.selectedType==="System"&&(i=i.filter(t=>t.actor==="System")),this.selectedType==="Security"&&(i=i.filter(t=>t.type==="Security"))),i},filteredLogs(){return this.filteredData.slice(this.startIndex,this.endIndex)},totalEntries(){return this.filteredData.length},totalPages(){return Math.ceil(this.totalEntries/this.entriesPerPage)},startIndex(){return(this.currentPage-1)*this.entriesPerPage},endIndex(){return Math.min(this.startIndex+this.entriesPerPage,this.totalEntries)}},methods:{statusClasses(i){return{"bg-success-focus text-success-main":i==="Success","bg-danger-focus text-danger-main":i==="Failed","bg-warning-focus text-warning-main":i==="Warning"}},goToPage(i){i>=1&&i<=this.totalPages&&(this.currentPage=i)},openDetails(i){this.selectedLog=i},closeModal(){this.selectedLog=null},deleteLog(i){confirm("Are you sure you want to delete this log entry?")&&(this.logs=this.logs.filter(t=>t!==i))}}},M={class:"card basic-data-table"},j={class:"card-header border-bottom bg-base py-16 px-24 d-flex align-items-center justify-content-between"},I={class:"d-flex align-items-center gap-2"},D={class:"btn btn-outline-danger-600 border-danger-600 text-danger-600 hover-bg-danger-600 hover-text-white radius-8 px-20 py-11 d-flex align-items-center gap-2"},B={class:"btn btn-primary-600 radius-8 px-20 py-11 d-flex align-items-center gap-2"},V={class:"card-body p-24"},N={class:"d-flex flex-wrap align-items-center justify-content-between gap-3 mb-24"},E={class:"d-flex align-items-center gap-3"},F={class:"d-flex align-items-center gap-2"},U={class:"d-flex flex-wrap align-items-center gap-3"},G={class:"position-relative"},z={class:"table-responsive scroll-sm"},K={class:"table bordered-table mb-0"},H={class:"d-flex align-items-center gap-2"},R={class:"w-32-px h-32-px bg-white border border-neutral-200 rounded-circle d-flex justify-content-center align-items-center overflow-hidden"},J=["src"],O={class:"text-md mb-0 fw-medium d-block"},W={class:"text-xs text-secondary-light"},q={class:"text-primary-600 fw-medium"},Q={class:"text-secondary-light"},X={class:"text-secondary-light"},Y={class:"d-flex align-items-center gap-2"},Z=["onClick"],$=["onClick"],ee={class:"d-flex flex-wrap align-items-center justify-content-between gap-2 mt-24"},te={class:"text-secondary-light text-sm"},se={class:"pagination d-flex flex-wrap align-items-center gap-2 justify-content-center"},ie={class:"page-item"},oe=["onClick"],le={class:"page-item"},ne={key:0,class:"modal fade show d-block",tabindex:"-1",role:"dialog",style:{background:"rgba(0,0,0,0.5)"}},ae={class:"modal-dialog modal-lg modal-dialog-centered",role:"document"},re={class:"modal-content radius-16"},ce={class:"modal-header py-16 px-24 border-bottom"},de={class:"modal-body p-24"},ue={class:"d-flex align-items-center justify-content-between mb-24"},me={class:"text-lg mb-0 text-primary-600 fw-bold"},pe={class:"row g-3"},ge={class:"col-md-6"},xe={class:"d-flex align-items-center gap-2"},he={class:"text-neutral-900 fw-medium"},ye={class:"text-xs text-secondary-light"},fe={class:"col-md-6"},be={class:"text-neutral-900"},_e={class:"col-md-6"},ve={class:"text-neutral-900"},we={class:"col-md-6"},Ae={class:"text-neutral-900"},Se={class:"mb-24"},ke={class:"bg-neutral-50 radius-8 p-16 border border-neutral-200"},Le={class:"mb-0 text-sm text-secondary-light overflow-auto",style:{"max-height":"300px"}},Ce={class:"modal-footer border-top py-16 px-24"};function Pe(i,t,u,w,o,n){const a=g("iconify-icon");return c(),d("div",M,[e("div",j,[t[9]||(t[9]=e("h6",{class:"text-lg fw-semibold mb-0"},"Platform Audit Trail",-1)),e("div",I,[e("button",D,[r(a,{icon:"solar:trash-bin-trash-linear",class:"text-xl"}),t[7]||(t[7]=y(" Clear History ",-1))]),e("button",B,[r(a,{icon:"solar:export-linear",class:"text-xl"}),t[8]||(t[8]=y(" Export CSV ",-1))])])]),e("div",V,[e("div",N,[e("div",E,[e("div",F,[t[11]||(t[11]=e("span",{class:"text-secondary-light fw-medium"},"Show",-1)),h(e("select",{class:"form-select form-select-sm w-auto ps-12 py-6 radius-12 h-40-px","onUpdate:modelValue":t[0]||(t[0]=s=>o.selectedShow=s)},[...t[10]||(t[10]=[e("option",{value:"10"},"10",-1),e("option",{value:"20"},"20",-1),e("option",{value:"50"},"50",-1)])],512),[[f,o.selectedShow]])])]),e("div",U,[h(e("select",{class:"form-select form-select-sm w-auto ps-12 py-6 radius-12 h-40-px","onUpdate:modelValue":t[1]||(t[1]=s=>o.selectedType=s)},[...t[12]||(t[12]=[e("option",{value:""},"All Types",-1),e("option",{value:"Admin"},"Admin Action",-1),e("option",{value:"System"},"System Event",-1),e("option",{value:"Security"},"Security",-1)])],512),[[f,o.selectedType]]),e("div",G,[h(e("input",{type:"text",class:"form-control form-control-sm w-auto ps-12 py-6 radius-12 h-40-px",placeholder:"Search activity...","onUpdate:modelValue":t[2]||(t[2]=s=>o.searchText=s)},null,512),[[L,o.searchText]]),r(a,{icon:"ion:search-outline",class:"position-absolute top-50 end-0 translate-middle-y me-12 text-secondary-light"})])])]),e("div",z,[e("table",K,[t[13]||(t[13]=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Actor"),e("th",{scope:"col"},"Action"),e("th",{scope:"col"},"Resource"),e("th",{scope:"col"},"IP Address"),e("th",{scope:"col"},"Timestamp"),e("th",{scope:"col"},"Status"),e("th",{scope:"col"},"Action")])],-1)),e("tbody",null,[(c(!0),d(b,null,_(n.filteredLogs,(s,p)=>(c(),d("tr",{key:p},[e("td",null,[e("div",H,[e("span",R,[s.avatar?(c(),d("img",{key:0,src:s.avatar,alt:"",class:"w-100 h-100 object-fit-cover"},null,8,J)):(c(),C(a,{key:1,icon:"solar:user-bold",class:"text-secondary-light"}))]),e("div",null,[e("span",O,l(s.actor),1),e("span",W,l(s.role),1)])])]),e("td",null,[e("span",q,l(s.action),1)]),e("td",null,[e("span",Q,l(s.resource),1)]),e("td",null,[e("span",X,l(s.ip),1)]),e("td",null,l(s.timestamp),1),e("td",null,[e("span",{class:m([n.statusClasses(s.status),"px-24 py-4 rounded-pill fw-medium text-sm"])},l(s.status),3)]),e("td",null,[e("div",Y,[e("button",{type:"button",onClick:A=>n.openDetails(s),class:"w-32-px h-32-px bg-primary-light text-primary-600 rounded-circle d-inline-flex align-items-center justify-content-center",title:"View Details"},[r(a,{icon:"solar:eye-linear"})],8,Z),e("button",{type:"button",onClick:A=>n.deleteLog(s),class:"w-32-px h-32-px bg-danger-focus text-danger-main rounded-circle d-inline-flex align-items-center justify-content-center",title:"Delete Log"},[r(a,{icon:"solar:trash-bin-trash-linear"})],8,$)])])]))),128))])])]),e("div",ee,[e("span",te," Showing "+l(n.startIndex+1)+" to "+l(n.endIndex)+" of "+l(n.totalEntries)+" entries ",1),e("ul",se,[e("li",ie,[e("a",{class:m(["page-link text-secondary-light fw-medium radius-4 border-0 px-10 py-10 d-flex align-items-center justify-content-center h-32-px w-32-px bg-base",{disabled:o.currentPage===1}]),href:"javascript:void(0)",onClick:t[3]||(t[3]=s=>n.goToPage(o.currentPage-1))},[r(a,{icon:"ep:d-arrow-left",class:"text-xl"})],2)]),(c(!0),d(b,null,_(n.totalPages,s=>(c(),d("li",{key:s,class:"page-item"},[e("a",{href:"javascript:void(0)",class:m(["page-link fw-medium radius-4 border-0 px-10 py-10 d-flex align-items-center justify-content-center h-32-px w-32-px",{"bg-primary-600 text-white":o.currentPage===s,"bg-primary-50 text-secondary-light":o.currentPage!==s}]),onClick:p=>n.goToPage(s)},l(s),11,oe)]))),128)),e("li",le,[e("a",{class:m(["page-link text-secondary-light fw-medium radius-4 border-0 px-10 py-10 d-flex align-items-center justify-content-center h-32-px w-32-px bg-base",{disabled:o.currentPage===n.totalPages}]),href:"javascript:void(0)",onClick:t[4]||(t[4]=s=>n.goToPage(o.currentPage+1))},[r(a,{icon:"ep:d-arrow-right",class:"text-xl"})],2)])])])]),o.selectedLog?(c(),d("div",ne,[e("div",ae,[e("div",re,[e("div",ce,[t[14]||(t[14]=e("h5",{class:"modal-title fw-bold"},"Activity Details",-1)),e("button",{type:"button",class:"btn-close",onClick:t[5]||(t[5]=(...s)=>n.closeModal&&n.closeModal(...s))})]),e("div",de,[e("div",ue,[e("div",null,[t[15]||(t[15]=e("span",{class:"d-block text-sm text-secondary-light mb-1"},"Action",-1)),e("h6",me,l(o.selectedLog.action),1)]),e("span",{class:m([n.statusClasses(o.selectedLog.status),"px-16 py-8 rounded-pill fw-medium text-sm"])},l(o.selectedLog.status),3)]),e("div",pe,[e("div",ge,[t[16]||(t[16]=e("span",{class:"text-sm text-secondary-light fw-medium d-block mb-1"},"Actor",-1)),e("div",xe,[e("span",he,l(o.selectedLog.actor),1),e("span",ye,"("+l(o.selectedLog.role)+")",1)])]),e("div",fe,[t[17]||(t[17]=e("span",{class:"text-sm text-secondary-light fw-medium d-block mb-1"},"Resource",-1)),e("span",be,l(o.selectedLog.resource),1)]),e("div",_e,[t[18]||(t[18]=e("span",{class:"text-sm text-secondary-light fw-medium d-block mb-1"},"Timestamp",-1)),e("span",ve,l(o.selectedLog.timestamp),1)]),e("div",we,[t[19]||(t[19]=e("span",{class:"text-sm text-secondary-light fw-medium d-block mb-1"},"IP Address",-1)),e("span",Ae,l(o.selectedLog.ip),1)])]),t[21]||(t[21]=e("hr",{class:"my-24 border-neutral-200"},null,-1)),e("div",Se,[t[20]||(t[20]=e("h6",{class:"text-md fw-bold mb-12"},"Changes / Details",-1)),e("div",ke,[e("pre",Le,l(JSON.stringify(o.selectedLog.details,null,2)),1)])])]),e("div",Ce,[e("button",{type:"button",class:"btn btn-secondary radius-8",onClick:t[6]||(t[6]=(...s)=>n.closeModal&&n.closeModal(...s))},"Close")])])])])):k("",!0)])}const Te=v(T,[["render",Pe]]),Me={name:"ActivityLogs",components:{Breadcrumb:P,ActivityLogTable:Te}},je={class:"dashboard-main-body"},Ie={class:"alert alert-info-100 text-info-600 fw-medium border-0 d-flex align-items-center gap-2 mb-24 radius-12"};function De(i,t,u,w,o,n){const a=g("Breadcrumb"),s=g("iconify-icon"),p=g("ActivityLogTable");return c(),d("div",je,[r(a,{title:"Activity Logs",breadcrumbs:[{name:"Management",path:"/admin/activity-logs"},{name:"Audit Trail"}]}),e("div",Ie,[r(s,{icon:"solar:shield-check-bold",class:"text-xl"}),t[0]||(t[0]=y(" Detailed audit trail of all platform activities for compliance and security monitoring. ",-1))]),r(p)])}const Ve=v(Me,[["render",De]]);export{Ve as default};
